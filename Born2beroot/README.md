*This project has been created as part of the 42 curriculum by seukim.*

## Description

**Born2beRoot** 프로젝트는 가상 머신(VirtualBox)을 활용하여 자신만의 첫 번째 서버를 구축하는 시스템 관리 프로젝트입니다.

이 프로젝트의 주요 목표는 가상화 기술을 이해하고, 리눅스 운영체제를 설치하며, 엄격한 보안 규칙을 적용하는 것입니다. 그래픽 인터페이스 없이 오직 CLI 환경에서만 작동하는 서버를 구축하며, 다음과 같은 기술적 요소들을 구현합니다

- LVM 및 디스크 암호화: 보안을 위한 논리 볼륨 관리 및 파티션 암호화 설정.
- SSH 서비스: 4242 포트를 통한 안전한 원격 접속 설정 (root 접속 금지).
- UFW 방화벽: 특정 포트만 허용하는 네트워크 보안 설정.
- 비밀번호 정책: 복잡성 및 유효 기간을 포함한 강력한 계정 보안 정책.
- sudo 설정: 보안 로그 기록 및 TTY 모드를 포함한 권한 관리.
- Monitoring 스크립트: 시스템 상태를 10분마다 자동으로 출력하는 Bash 스크립트.


## Instructions

- VirtualBox를 실행하고 설정된 Debian 가상 머신을 선택하여 [시작] 버튼을 누릅니다.
- 터미널 환경(CLI)이 나타나면 사용자 ID(seukim)와 비밀번호로 로그인합니다.
- 호스트 PC의 터미널에서 다음 명령어를 통해 가상 머신에 접속 할 수 있습니다.
```bash
ssh seukim@<IP_ADDRESS> -p 4242
```
- 서버가 가동되면 monitoring.sh 스크립트가 10분마다 모든 터미널에 시스템 상태 정보를 출력합니다.
- 스크립트의 위치는 /usr/local/bin/monitoring.sh이며, cron을 통해 자동 실행됩니다.
- 가상 머신의 무결성을 확인하기 위해 다음 명령어로 .vdi 파일의 SHA1 해시값을 확인할 수 있습니다
```bash
shasum <파일명>.vdi
```
이 해시값은 제출된 signature.txt 파일의 내용과 일치해야 합니다.

##  Resources
- Debian Official Documentation: 시스템 설치 및 기본 패키지 관리
- Sudoers Manual (man 5 sudoers): visudo를 이용한 로그 설정 및 TTY 보안 정책 참조
- UFW (Uncomplicated Firewall) Guide: 포트 4242 개방 및 방화벽 활성화 방법
- LVM & LUKS Guide: 논리 볼륨 관리 및 디스크 암호화 설정

## AI Usage Disclosure

- README 문서 구조화: 과제 필수 항목인 비교 분석(Debian vs Rocky 등) 및 필수 섹션 구성에 대한 가이드를 얻었습니다.
- 리눅스 명령어에 대한 가이드를 얻었습니다.
- 스크립트 로직 검토: monitoring.sh 작성 시 시스템 자원(CPU, RAM, Disk) 정보를 추출하는 리눅스 명령어의 옵션을 검토했습니다.
- 본 README.md 문서의 작성 가이드를 얻었습니다.

1. 프로젝트 개요

가상머신은 어떻게 동작하는가?
- 가상 머신은 실제 호스트 컴퓨터(물리적 하드웨어)의 CPU, 메모리, 저장 장치 등의 자원을 가상화 기술을 통해 논리적으로 나누어 사용합니다.
- 가상 머신 내부에 설치된 운영체제(Debian 또는 Rocky)는 자신이 실제 하드웨어에서 직접 구동되고 있다고 인식하며, 호스트 OS나 다른 가상 머신으로부터 격리된 상태로 동작합니다.
- 가상 머신을 만들기 위해서는 VirtualBox나 UTM 같은 소프트웨어가 필요하며, 이를 하이퍼바이저라고 부릅니다.
- 하이퍼바이저는 호스트 시스템의 물리적 자원을 각 가상 머신의 설정값에 맞춰 적절히 배분하고 제어하는 역할을 수행합니다.

어떤 운영 시스템을 선택했는가?
- 데비안 선택

Debian 과 Rocky의 간단한 차이점들
- 데비안은 커뮤니티가 주도하는 독립적인 배포판 - 자유도 높음
- 로키는 기업용 - 레드햇 엔터프라이즈 리눅스(RHEL)의 소스 코드를 그대로 사용하는 배포판으로, 기업 환경에 최적화된 안정성
- 데비안은 apt, aptitude 명령어 사용 / 로키는 dnf, yum 명령어 사용

가상머신의 목적은? (사용이유)
- 하나의 물리 서버에 여러 서버 구축하여 여러 개의 가상 서버를 동시에 구동할 수 있어 하드웨어 구매 비용 아낌
- 각 서비스가 필요로 하는 만큼만 자원을 할당하고, 필요에 따라 유연하게 조절 가능
- 가상 머신 내부에서 발생하는 문제는 호스트 OS나 다른 가상머신에 전혀 영향을 주지 않음

AppArmor vs SELinux
- AppArmor는 파일의 절대 경로를 사용하여 보안 프로필을 생성하므로, 관리자가 설정 내용을 이해하고 수정하기가 훨씬 직관적임
- SELinux은 파일 시스템에 직접 보안 라벨을 입혀 보안성이 강력함

UFW vs firewalld
- Uncomplicated Firewall vs Dynamic Firewall Manager
- UFW는 명령어가 매우 직관적이고 설정이 간편함, 규칙이 변경되면 방화벽을 재시작해야 적용되는 경우가 많음
- firewalld는 Zone 개념을 이용하여 네트워크 환경별로 다른 규칙을 적용함, 서비스 중단 없이 실시간으로 규칙을 변경하고 적용하는데 최적화됨 

VirtualBox vs UTM
- VirtualBox은 오라클 UTM은 UTM 제작 팀에서 만듦
- VirtualBox은 윈도우, 리눅스, 맥(Intel)
- UTM은 맥, iOS
- VirtualBox은 호스트 OS 위에서 하드웨어 자원을 직접 가상화함.
- UTM은 애플의 가상화 프레임워크를 사용함

apt와 aptitude의 차이점?
- apt (Advanced Package Tool) 데비안의 표준 패키지 관리 도구로 가장 대중적으로 사용
- aptitude는 apt보다 높은 수준의 패키지 관리 도구로 패키지 설치에서 문제가 생기면 해결책을 제시해주고 안쓰는 파일도 지워주는 도구

2. 기본 설정

처음 실행 시 그래픽 환경이 아닌지, 비밀번호가 요구되는지 확인
UFW 서비스가 시작되었는지 확인
SSH 서비스가 시작되었는지 확인
사용되는 OS가 데비안이 맞는지 확인

3. 사용자

로그인한 유저가 가상머신 속에 존재하는지
유저가 추가되었는지, 그것이 sudo와 user42 그룹에 속하는 지
비밀번호 정책에 관한 규칙들이 제대로 설정 되었는지
새로운 유저 생성
임의로 규칙에 맞게 비밀번호 생성
새로운 유저가 추가된 상태에서 피평가자가 새로운 이름을 가진 그릅을 생성해야함
그리고 그 그룹을 이 유저에게 할당해야함 진짜 속하는지 확인해야함
비밀번호 정책의 장점을 설명해야함 단점도 설명해야함

4. 호스트명과 파티션들

가상머신의 호스트명이 seukim42인지 확인
호스트명을 수정하고 가상머신을 다시 시작
업데이트 확인
다시 원래의 호스트명으로 복원
어떻게 이 가상머신의 파티션들을 확인할 수 있는가
과제에 주어진 예시와 출력 결과물 비교

5. sudo

sudo 프로그램이 가상머신에 설치되어있는지 확인
새로운 유저를 sudo 그룹에 할당하는 것을 보여줘야함
왜 sudo를 사용해야하나요
/var/log/sudo/ 폴더가 존재하는지, 그리고 그것이 최소한 한개의 파일을 갖는지 확인
/var/log/sudo 폴더 속 파일들이 업데이트 되었는지 확인

6. UFW

UFW 프로그램이 가상머신에 설치되었는지 확인
제대로 동작하는지 확인
UFW가 무엇인지 장점 설명
UFW 규칙 나열 4242 포트에 대한 규칙도 있어야함
8080 포트를 열기 위함 새로운 규칙 추가 규칙 목록에 추가되었는지 확인
새로운 규칙 삭제

7. SSH

SSH 서비스가 가상머신에 설치되었는지 확인
제대로 동작하는지 확인
SSH가 무엇인지 장점은 무엇인지 설명
SSH가 4242포트만들 사용하는지 확인
SSH를 사용하도록 하고 root유저로 ssh를 사용할 수 없음을 확인

8. Script monitoring

스크립트가 어떻게 동작하는지 코드 보여주기
cron이란 무엇인지
어떻게 설정했길래 10분마다 한번씩 실행되는지
매분 실행되도록 고치고 다시 서버를 재시작하고 여전히 같은 장소에 있는지 권한은 바뀌지 않았는지 수정되지 않았는지 확인 후 1분마다 동작하는지 확인
